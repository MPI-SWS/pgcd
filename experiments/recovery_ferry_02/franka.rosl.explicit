start: wait(3.0);
setJoints( 0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398,
           0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218 );
try grasp(0.03);
catch MotionError() => {
    receive(crane, idle) {
        case Check() => {
            send(crane, Error);
            openGripper(0.03);
            setJoints( 0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218,
                       0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398);
            receive(crane, idle) { case Ok() => skip; }
            goto start;
}   }   }
homePos(0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218);
setJoints( 0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398,
           -0.828313, 0.116449, -0.099996, -2.796003, -0.055448, 2.902437, -0.088231 );
openGripper(0.03);
homePos(-0.828313, 0.116449, -0.099996, -2.796003, -0.055448, 2.902437, -0.088231);
receive(carrier, idle) {
    case Check() => send(crane, Ok); }
receive(carrier, idle) {
    case Ok() => skip;
    case Error() => {
        setJoints( 0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398,
                   -0.828313, 0.116449, -0.099996, -2.796003, -0.055448, 2.902437, -0.088231 );
        grasp(0.03);
        homePos(-0.828313, 0.116449, -0.099996, -2.796003, -0.055448, 2.902437, -0.088231);
        setJoints( 0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398,
                   0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218 );
        openGripper(0.03);
        homePos(0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218);
        receive(crane, idle) { case Ok() => skip; }
        goto start;
}   }
setJoints( 0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398,
           0.137950, 0.383110, 0.019275, -1.932828, 0.016947, 2.304120, 0.936556 );
try grasp(0.03);
catch MotionError() => {
    openGripper(0.03);
    setJoints( 0.137950, 0.383110, 0.019275, -1.932828, 0.016947, 2.304120, 0.936556,
               0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398);
    send(carrier, Error);
    setJoints( 0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398,
               -0.828313, 0.116449, -0.099996, -2.796003, -0.055448, 2.902437, -0.088231 );
    grasp(0.03);
    homePos(-0.828313, 0.116449, -0.099996, -2.796003, -0.055448, 2.902437, -0.088231);
    setJoints( 0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398,
               0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218 );
    openGripper(0.03);
    homePos(0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218);
    receive(crane, idle) { case Ok() => skip; }
    goto start;
}
homePos(0.137950, 0.383110, 0.019275, -1.932828, 0.016947, 2.304120, 0.936556);
send(carrier, Ok);
setJoints( 0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398,
           0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218 );
openGripper(0.03);
homePos(0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218);
receive(carrier, idle) {
    case Ok() => skip;
    case Error() => {
        setJoints( 0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398,
                   0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218 );
        grasp(0.03);
        homePos(0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218);
        send(carrier, Ok); # notify carrier
        setJoints( 0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398,
                   0.137950, 0.383110, 0.019275, -1.932828, 0.016947, 2.304120, 0.936556 );
        openGripper(0.03);
        homePos(0.137950, 0.383110, 0.019275, -1.932828, 0.016947, 2.304120, 0.936556);
        setJoints( 0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398,
                   -0.828313, 0.116449, -0.099996, -2.796003, -0.055448, 2.902437, -0.088231 );
        grasp(0.03);
        homePos(-0.828313, 0.116449, -0.099996, -2.796003, -0.055448, 2.902437, -0.088231);
        setJoints( 0.000000, -0.785398, -0.000000, -2.356195, 0.000000, 1.570796, 0.785398,
                   0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218 );
        openGripper(0.03);
        homePos(0.960601, 0.101824, -0.042593, -2.81301, 0.031016, 2.885839, 1.677218);
        receive(crane, idle) { case Ok() => skip; }
        goto start;
}   }
